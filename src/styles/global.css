@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --min-gap: 2rem;
    --thin-gap: 2rem;
    --item-gap: 4rem;
    --div-gap: 6rem;
    --section-gap: 8rem;
  }

  html {
    @apply scroll-smooth;
    font-size: 20px;
    font-feature-settings: "palt";
    letter-spacing: 0.15rem;
    text-align: justify;
    word-break: break-all;
    scroll-padding-top: 4rem;
  }

  /* @media (max-width: 1600px) {
    html {
      font-size: 16px;
    }
  } */

  html {
    font-size: 16px;

    /* ~md */
    @media (min-width: 376px) and (max-width: 767px) {
      /* 375pxで16px、767pxで20pxになるように計算 */
      font-size: clamp(16px, calc(1.0204vw + 12.1735px), 20px);
    }

    /* md~ */
    @media (min-width: 768px) {
      font-size: 1.5vw;
    }

    /* lg~ */
    @media (min-width: 1024px) {
      font-size: 1.3vw;
    }
  }

  ::selection {
    @apply bg-line;
  }

  body {
    @apply font-sans text-dark bg-white m-0 z-[1];
  }

  img {
    @apply max-w-full h-auto block;
  }

  a {
    @apply text-inherit no-underline transition-all duration-200;
  }

  b,
  strong {
    @apply font-semibold;
  }

  h1 {
    @apply text-h1 font-semibold m-0;
  }

  h2 {
    @apply text-h2 font-semibold m-0;
  }

  h3 {
    @apply text-h3 font-semibold m-0;
  }

  p {
    @apply text-p leading-6 font-normal m-0;
  }

  small {
    @apply text-small font-normal m-0;
  }
}

@layer utilities {
  /**
   * Typography utilities
   * `text-box` is still experimental; apply only when supported.
   */
  @supports (text-box: trim-both cap alphabetic) {
    .text-box-trim-both-cap {
      text-box: trim-both cap alphabetic;
    }
  }

  [data-reveal] {
    opacity: 0;
    transform: translateY(var(--reveal-y, 10px));
    transition:
      opacity 600ms ease,
      transform 600ms ease;
    transition-delay: var(--reveal-delay, 0ms);
    will-change: opacity, transform;
  }

  [data-reveal].is-revealed {
    opacity: 1;
    transform: translateY(0);
  }

  @media (prefers-reduced-motion: reduce) {
    [data-reveal] {
      opacity: 1;
      transform: none;
      transition: none;
    }
  }
}

@layer components {
  /**
   * 作品詳細のMarkdown本文用のスタイル
   */
  /* 基本は詰め気味の縦リズム */
  .work-markdown > * + * {
    margin-top: var(--item-gap);
  }

  /* 見出しの手前は少し広め（章の切れ目を作る） */
  .work-markdown > * + :is(h1, h2, h3, h4, h5, h6) {
    margin-top: calc(var(--item-gap) * 3);
  }

  /* 見出し直後は詰める */
  .work-markdown > :is(h1, h2, h3, h4, h5, h6) + * {
    margin-top: calc(var(--item-gap) * 0.4);
  }

  /* ul/ol の上はさらに詰める（特に見出し直後） */
  .work-markdown > * + :is(ul, ol) {
    margin-top: calc(var(--item-gap) * 0.3);
  }

  .work-markdown > :is(h1, h2, h3, h4, h5, h6) + :is(ul, ol) {
    margin-top: calc(var(--item-gap) * 0.25);
  }

  .work-markdown p {
    @apply text-p leading-8 whitespace-pre-line break-words;
  }

  .work-markdown ul,
  .work-markdown ol {
    @apply text-p leading-8 break-words pl-6;
  }

  .work-markdown ul {
    @apply list-disc;
  }

  .work-markdown ol {
    @apply list-decimal;
  }

  .work-markdown li {
    @apply break-words;
  }

  .work-markdown img {
    @apply block max-w-full h-auto;
  }

  .work-markdown a {
    @apply underline;
  }
}
